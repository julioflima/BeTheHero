var fullJsUrl=document.querySelector('script[src*\x3d"hotmart-lead"]'),baseServerURL=fullJsUrl.src.split("/js/hotmart-lead")[0],HotLead={affiliation:"",src:"",debug:!1,observer:void 0,controlPolling:void 0,listForm:[],listSubmitForm:[],setup:function(){this.started||(this.started=!0,this.affiliation=HotUtils.getUrlParameters("ref","",!0),this.src=HotUtils.getUrlParameters("hsrc","",!0),this.debug=HotUtils.getUrlParameters("debug","",!0),this.validate=HotUtils.getUrlParameters("hotleads","",!0),HotLead.Page.externalPageUrl=
HotLead.Page.getURL(),HotUtils.logInfo("Run setup"),HotUtils.logInfo("ExternalPageUrl:"+HotLead.Page.externalPageUrl));HotLead.Page.createTriggers()},getParameters:function(){return"lead\x3d"+HotLead.value+(null!=HotLead.affiliation?"\x26affiliationCode\x3d"+HotLead.affiliation:"")+"\x26leadType\x3d"+HotLead.type+(null!=HotLead.src?"\x26src\x3d"+HotLead.src:"")+"\x26url\x3d"+HotLead.Page.externalPageUrl+"\x26account\x3d"+HotUtils.getAccount()+"\x26referrer\x3d"+HotLead.referrer+"\x26formId\x3d"+HotLead.formId},
crateObserver:function(){this.observer=new MutationObserver(function(a){HotLead.Page.createTriggers()});this.observer.observe(document,{childList:!0,attributes:!1,characterData:!1,subtree:!0});HotUtils.logInfo("Monitoring by Observer")},cratePolling:function(){HotLead.controlPolling=setInterval(function(){HotLead.Page.createTriggers();"complete"===document.readyState&&(HotUtils.logInfo("Document complete"),clearInterval(HotLead.controlPolling))},1E3);HotUtils.logInfo("Monitoring by Polling")},checkInstallation:function(){setTimeout(function(){0<
HotLead.listForm.length&&0<HotLead.listSubmitForm.length&&alert("--- HOTLEADS 2.0: INSTALLED --- \n Try sending a lead (Tente enviar um lead)")},5E3)},Page:{externalPageUrl:"",getURL:function(){var a=encodeURIComponent(window.location);""!==document.referrer&&HotUtils.inIframe()&&(HotUtils.logInfo("Iframe"),a=encodeURIComponent(document.referrer));return a},getIframeForms:function(){for(var a=[],b=document.getElementsByTagName("iframe"),c=0;c<b.length;c++){var d=HotUtils.getIFrameBody(b[c]);if(null!==
d)for(var d=d.getElementsByTagName("form"),e=0;e<d.length;e++)a.push(d[e])}return a},getFormsCollection:function(){for(var a=[],b=document.getElementsByTagName("form"),c=0;c<b.length;c++)a.push(b[c]);b=this.getIframeForms();return a=a.concat(b)},getVisibleSubmitButtonInForm:function(a){var b=[];a=HotUtils.getVisibleElementsByTagName(a,"button");for(var c=0;c<a.length;c++){var d=a[c];if("submit"==d.type||"submit"==d.name)return b[0]=d,b}0<a.length&&(b[0]=a[0]);return b},searchSubmitOutsideForm:function(a){HotUtils.logInfo("Search submit outside of form:");
var b=["button","input","a","img"];for(a=a.nextElementSibling;null!=a;){for(var c=a.nodeName.toLowerCase(),d=0;d<b.length;d++)if(c===b[d]&&HotUtils.isVisible(a))if("input"===c){if("submit"==a.type)return a}else return a;a=a.nextElementSibling}},searchSubmitInsideForm:function(a){HotUtils.logInfo("Search submit inside of form");var b=[],c=this.getVisibleSubmitButtonInForm(a);if(0<c.length)return b[0]=c[0],b;for(var c=HotUtils.getVisibleElementsByTagName(a,"input"),d=0;d<c.length;d++){var e=c[d];if("submit"==
e.type||"submit"==e.name)return b[0]=e,b}c=document.querySelectorAll("form div[class*\x3dfrb_button]");b=HotUtils.addNodeListToArray(c,b);c=document.querySelectorAll("form div[class*\x3dsubmit]");b=HotUtils.addNodeListToArray(c,b);c=document.querySelectorAll("form span[class*\x3dbutton]");b=HotUtils.addNodeListToArray(c,b);0==b.length&&(c=HotUtils.getElementsByTagName(a,"button"),0<c.length&&(b[0]=c[0]));c=document.querySelectorAll("form *[type\x3dsubmit]");b=HotUtils.addNodeListToArray(c,b);b=b.concat(HotUtils.getVisibleElementsByTagName(a,
"a"));return b=b.concat(HotUtils.getVisibleElementsByTagName(a,"img"))},searchSubmit:function(a){var b=this.searchSubmitInsideForm(a);if(0==b.length){HotUtils.logInfo("Submit not found inside of form:");HotUtils.logElement(a);var c=this.searchSubmitOutsideForm(a);void 0!=c?(b.push(c),HotUtils.logInfo("Submit found outside of form:"),HotUtils.logElement(c)):(HotUtils.logError("Submit not found outside of form:"),HotUtils.logElement(a))}return b},getLeads:function(a){return[{type:"email",lead:HotUtils.getEmail(a)}]},
createTriggers:function(){var a=HotUtils.getHotSubmit();if(0<a.length){HotUtils.logInfo("Found "+a.length+" HotSubmit");for(var b=0;b<a.length;b++){HotUtils.logInfo("Submit_id: "+a[b]);var c=document.getElementById(a[b]);this.addTrigger(c)}}else this.createTriggersAllForms()},createTriggersAllForms:function(){for(var a=this.getFormsCollection(),b=a.length,c=0;c<b;c++){var d=a[c];0>HotLead.listForm.indexOf(d)&&!HotUtils.hasPassword(d)&&(HotLead.listForm.push(d),this.addTriggerByForm(d))}0==HotLead.listSubmitForm.length&&
(a=document.querySelectorAll('a[class*\x3d"button"]'),this.addSubmitFormByNodeList(a))},addSubmitFormByNodeList:function(a){for(var b=0;b<a.length;b++){var c=a[b];0>HotLead.listSubmitForm.indexOf(c)&&(HotLead.listSubmitForm.push(c),this.addTrigger(c))}},addTriggerByForm:function(a){HotUtils.logInfo("Add trigger on form:");HotUtils.logElement(a);a=this.searchSubmit(a);for(var b=a.length,c=0;c<b;c++){var d=a[c];0>HotLead.listSubmitForm.indexOf(d)&&(HotLead.listSubmitForm.push(d),this.addTrigger(d))}},
findFormToSend:function(a){var b=a.form;null==b&&(null!=a.parentElement.form?b=a.parentElement.form:null!=a.parentElement.parentElement&&1==a.parentElement.parentElement.nodeType&&"FORM"==a.parentElement.parentElement.nodeName&&(b=a.parentElement.parentElement),null==b&&(b=HotUtils.getClosest(a,"form"),null==b&&(b=a.parentNode.previousElementSibling)),null==b||"FORM"!=b.nodeName)&&(b=a.previousElementSibling);a=[];null!=b&&"FORM"==b.nodeName?a.push(b):a=this.getFormsCollection();return a},sendLead:function(a,
b){HotLead.value="email"==b.type?encodeURIComponent(b.lead):b.lead;HotLead.type=b.type;HotLead.formId=a.getAttribute("id");HotUtils.logInfo("Send lead:"+b.lead);HotUtils.logElement(a);HotLead.Util.send(HotLead.getParameters());HotLead.validate&&alert("--- HOTLEADS 2.0: OK --- \n Lead sent(Lead enviado): "+b.lead)},addTrigger:function(a){sendEvent=function(a){a=HotUtils.toElement(a);a=HotLead.Page.findFormToSend(a);for(var b=0;b<a.length;b++)for(var d=a[b],e=HotLead.Page.getLeads(d),f=0;f<e.length;f++){var g=
e[f];null!=g.lead&&""!=g.lead&&HotLead.Page.sendLead(d,g)}};HotUtils.logInfo("Event added to element:");HotUtils.logElement(a);HotUtils.addEvent(a,"click",sendEvent)}},Util:{send:function(a){try{HotUtils.logInfo("Send parameters: "+a),HotUtils.sendRequest(baseServerURL+"/rest/v1/processor/collector","POST",a)}catch(b){HotUtils.logError("Send:"+a+"-"+b)}}}},HotUtils={lastParameters:"",getUrlParameters:function(a,b,c){try{var d=this.getRequestParameterValue(b.length?b:window.location.search,a,c);null==
d&&this.inIframe()&&(d=this.getRequestParameterValue(document.referrer,a,c));return d}catch(e){return null}},getRequestParameterValue:function(a,b,c){try{var d=a.length?a.split("?")[1].split("\x26"):""}catch(f){return null}for(a=0;a<d.length;a++){var e=d[a].split("\x3d");if(e[0]==b)return c?decodeURIComponent(e[1]):e[1]}return null},getValueByName:function(a,b){a=a.elements;for(var c=0;c<a.length;c++)if(a[c].name.toLowerCase()==b)return a[c].value;return null},getHotParameters:function(a){var b=[],
c=0,d=window.hot.q;if(d)for(var e=0;e<d.length;++e){var f=d[e];f["0"]==a&&(b[c]=f["1"],c++)}return b},getAccount:function(){var a=this.getHotParameters("account");return 0<a.length?a[0]:""},getHotSubmit:function(){return this.getHotParameters("submit_id")},getHotForm:function(){return this.getHotParameters("form_id")},getValueEmail:function(a){for(var b="",c=a.length,d=0;d<c;d++){var e=a[d];if(0<=e.value.indexOf("@")&&"hidden"!=e.type){b=e.value;break}}return b},getEmail:function(a){var b=document.querySelectorAll("form input[type\x3demail]"),
b=this.getValueEmail(b);if(""!=b)return b;b=a.getElementsByTagName("input");b=this.getValueEmail(b);if(""!=b)return b;b=document.querySelectorAll("form input");b=this.getValueEmail(b);if(""!=b)return b},hasPassword:function(a){a=a.getElementsByTagName("input");for(var b=a.length,c=0;c<b;c++)if("password"==a[c].type)return!0;return!1},sendRequest:function(a,b,c){c==HotUtils.lastParameters&&"GET"!=b||window.hotlobj.sendRequest(a,b,!1,c,function(){4==this.readyState&&(200==this.status?HotUtils.logInfo(b+
" "+a+" OK"):HotUtils.logError(b+" "+a+" ERROR "+this.status+"-"+this.statusText))});HotUtils.lastParameters=c},toElement:function(a){var b=a.toElement?a.toElement:a.currentTarget;null==b&&(b=a.srcElement);return b},getElementsByTagName:function(a,b){b=b.split(",");for(var c=[],d=0;d<b.length;d++)c=c.concat(HotUtils.htmlCollectionToArray(a.getElementsByTagName(b[d])));return c},htmlCollectionToArray:function(a){for(var b=0,c=[];b<a.length;b++)c.push(a[b]);return c},addEvent:function(a,b,c){return a.attachEvent?
a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},getClosest:function(a,b){b=b.toUpperCase();do if(a.nodeName===b)return a;while(a==a.parentNode);return null},indexOf:function(a,b){return null==a?-1:a.indexOf(b)},isVisible:function(a){a=window.getComputedStyle(a);return"none"!==a.display&&"hidden"!==a.visibility&&0!==a.width&&0!==a.height&&0!==a.opacity},getVisibleElementsByTagName:function(a,b){a=a.getElementsByTagName(b);b=[];for(var c,d=0;d<a.length;d++)c=a[d],HotUtils.isVisible(c)&&b.push(c);
return b},getIFrameBody:function(a){var b=null;try{b=(a.contentDocument||a.contentWindow.document).body}catch(c){}return b},inIframe:function(){try{return window.self!==window.top}catch(a){return!0}},logInfo:function(a){HotLead.debug&&console.log("INFO: "+a)},logError:function(a){HotLead.debug&&console.log("ERROR: "+a)},logElement:function(a){HotLead.debug&&console.dir(a)},addNodeListToArray:function(a,b){for(var c=0;c<a.length;c++)b.push(a[c]);return b}};HotLead.referrer=document.referrer;HotLead.setup();
try{HotLead.crateObserver()}catch(a){HotUtils.logError("Failed to create observer \x3e"+a),HotLead.cratePolling()}HotLead.validate&&HotLead.checkInstallation();